# Event Manager (Next.js 14+)

Минимальный и аккуратный менеджер мероприятий: просмотр, поиск/фильтрация/сортировка, создание/редактирование/удаление, избранное, экспорт в JSON, пагинация. Данные хранятся локально (без реального бэкенда).

## Стек
- **Next.js 14+ (App Router)**
- **TypeScript**
- **CSS Modules** (+ глобальные дизайн-токены в `globals.css`)
- **React Context + useReducer** (сохранение в `localStorage`)

## Что реализовано по ТЗ
- [x] Список мероприятий карточками (название, описание, дата/время, категория, статус)
- [x] Создание/редактирование/удаление (с подтверждением в модалке)
- [x] Валидация формы: название обязательно, дата не может быть в прошлом
- [x] Фильтр по категории и статусу
- [x] Сортировка по названию/дате (asc/desc)
- [x] Поиск по названию/описанию
- [x] Избранное (+ отдельная вкладка)
- [x] Экспорт списка в JSON
- [x] Пагинация с управлением размером страницы
- [x] Адаптивный интерфейс, аккуратные фокус-состояния
- [x] RU-локализация интерфейса

## Быстрый старт
```bash
# Установка
npm i

# Запуск разработки
npm dev

# Открыть
http://localhost:3000
```

> Если у вас используется структура `src/`, файлы лежат в `src/app/*`. Если без `src/`, то в `app/*`. Оба варианта поддерживаются — проверьте импорты.

## Архитектура и ключевые файлы
- `app/layout.tsx` — каркас приложения, подключение `globals.css`, провайдер `EventProvider`, Header/Main/Footer.
- `app/context/EventContext.tsx` — состояние и редьюсер (`ADD/UPDATE/DELETE/TOGGLE_FAVORITE/INIT`), синхронизация с `localStorage`.
- `types/event.ts` — строгие типы `Event`, `EventFormData`, `Category`, `Status`.
- `app/events/page.tsx` — список, KPI-карточки, поиск/фильтры/сортировка/экспорт.
- `app/events/new/page.tsx` — создание события.
- `app/events/[id]/page.tsx` — редактирование события (исправлено: клиентский компонент, нормализация даты `toISOString`).
- `app/components/EventList/*` — список, карточка, пагинация, подтверждение удаления.
- `app/components/EventForm/*` — форма с валидацией и аккуратными селектами/инпутами.
- `app/components/layout/Header/*` — сдержанный header: CSS Grid-навигация, активный пункт, sticky, мобильное меню, a11y.
- `lib/utils.ts` — экспорт данных в JSON.

## Данные и хранение
- Источник данных — **`localStorage`** (ключ `event-manager:events`).
- При первом запуске подставляются сид-данные.
- Статусы автоматически обновляются: если дата прошла — событие помечается **«Завершено»**.

## UI/UX и доступность
- Консистентные **кнопки** (`primary/secondary/danger`) и **селекты** в едином стиле.
- **Пагинация** локализована: «Назад/Вперёд», «Стр. N из M».
- Карточки: чипы категории/статуса, лёгкие тени, внятные hover/фокус состояния.
- Header: «skip to content», `aria`-атрибуты, поддержка мобильного меню.

## Глобальные дизайн-токены
Единые переменные вынесены в `app/globals.css` (или `src/app/globals.css`). Убедитесь, что в `layout.tsx` есть `import './globals.css'`.

```css
:root {
  /* фоны */
  --background: #ffffff;
  --background-secondary: #f8fafc;
  --bg: var(--background);
  --bg-2: var(--background-secondary);

  /* текст */
  --foreground: #0b1020;
  --fg: var(--foreground);
  --muted: #6b7280;

  /* бренд/границы/поверхности */
  --brand: #0070f3;
  --brand-2: #0a66ff;
  --card: #ffffff;
  --border: #e5e7eb;

  /* эффекты */
  --ring: rgba(0, 112, 243, 0.25);
  --shadow: 0 6px 22px rgba(10,16,32,.08);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0b1220;
    --background-secondary: #0f172a;
    --fg: #e5e7eb;
    --muted: #9ca3af;
    --card: #0f172a;
    --border: #1f2937;
    --shadow: 0 8px 30px rgba(0,0,0,.45);
  }
}
```

> **Важно:** в CSS-модулях не используйте «голые» селекторы (`input`, `select` и т.п.). Всегда привязывайте их к локальному классу: `.formGroup input { … }` — это устраняет ошибки «Selector is not pure».

## Скрипты и качество кода (опционально)
Рекомендуется добавить:
- **ESLint + Prettier**,
- **Husky + lint-staged** (проверка перед коммитом).

## Деплой
- Рекомендуемый деплой — **Vercel**. Проект не зависит от внешних API и готов к статическому хостингу.

## Известные ограничения
- Данные только в `localStorage`. Обновление страницы на другом устройстве/браузере не синхронизирует события.
- Временные зоны: для `<input type="datetime-local">` дата приводится к ISO при сохранении. Отображение идёт по локальному времени пользователя.

---

### Что обновлено в этом релизе
- RU-локализация списка, форм, пагинации и кнопок.
- Новый аккуратный **Header** (Grid, sticky, a11y).
- Обновлённый дизайн кнопок и селектов, чипы статусов и категорий.
- Глобальные дизайн-токены в `globals.css`.
- Фикс CSS Modules: селекторы сделаны «чистыми» (`.class input` вместо `input`).
- Исправлено редактирование события (`use client`, `usePathname/useParams`, корректная нормализация даты).
